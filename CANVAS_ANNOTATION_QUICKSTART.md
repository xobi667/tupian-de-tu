# ChatCanvas 快速上手指南

5 分钟快速了解如何使用 Xobi 的画布标注功能。

## 快速开始

### 1. 生成图片

首先在单图创作模式下生成一张图片：

1. 上传参考图和产品图
2. 点击"立即生成"
3. 等待 AI 生成结果

### 2. 开启标注模式

在生成结果区域，点击右上角的"📍 标注模式"按钮。

此时：
- 按钮变为"🔵 标注模式（开启）"
- 图片上方出现提示："点击图片任意位置添加标注点"
- 底部弹出标注列表面板
- 鼠标变为十字准星

### 3. 添加标注

在图片上点击需要修改的位置：

```
点击位置 1 → 输入: "把这里的背景改成蓝色"
点击位置 2 → 输入: "添加文字：新品上市"
点击位置 3 → 输入: "调整产品角度向右 15 度"
```

每次点击都会：
1. 在点击位置显示序号标记（紫色圆点 + 数字）
2. 弹出输入对话框
3. 输入修改需求后按 Enter 或点击"保存"

### 4. 管理标注

#### 查看标注
- 悬停在标注点上：显示修改需求提示框
- 查看底部面板：查看所有标注列表

#### 编辑标注
- 点击已有标注点
- 修改文字后保存

#### 删除标注
- 点击标注点打开对话框
- 点击"删除"按钮

### 5. 提交修改

完成所有标注后，点击底部面板的"🚀 提交修改"按钮。

系统会自动：
1. 整理所有待处理的标注
2. 生成修改消息发送到 AI
3. 标注状态变为"处理中"（粉红色脉冲）

AI 收到的消息格式：
```
我需要修改以下位置：
1. 把这里的背景改成蓝色
2. 添加文字：新品上市
3. 调整产品角度向右 15 度
```

## 常用操作

### 快捷键

| 操作 | 快捷键 |
|------|--------|
| 保存标注 | Enter |
| 关闭对话框 | 点击外部或 × |

### 标注状态

| 状态 | 颜色 | 说明 |
|------|------|------|
| 待处理 | 紫色 | 刚创建的标注 |
| 处理中 | 粉红色（脉冲） | 已提交给 AI |
| 已完成 | 蓝色 | AI 已处理完成 |

### 批量操作

```javascript
// 清空所有标注
clearAnnotations();

// 提交所有标注
submitAnnotations();
```

## 最佳实践

### 1. 精准描述

❌ 不好的描述：
```
"改一下"
"换个背景"
```

✅ 好的描述：
```
"把这里的背景改成纯蓝色（#0066FF）"
"将背景替换为渐变效果，从左到右由深蓝到浅蓝"
```

### 2. 使用引用

标注可以结合 @ 引用系统：

```
"把这里的风格改成 @参考图 的样式"
"在此处添加 @产品图 的产品特写"
```

### 3. 分步标注

对于复杂修改，建议分批提交：

第一批：布局调整
```
1. 调整产品位置居中
2. 缩小产品尺寸为原来的 80%
```

第二批：细节优化
```
1. 添加阴影效果
2. 优化背景色彩
```

### 4. 保存历史

重要的标注会自动保存到历史记录中：
- 在历史面板可以看到"📍 N 个标注"标签
- Reopen 时会自动恢复所有标注点

## 实际案例

### 案例 1: 电商主图优化

**场景**: 生成了一张沙发主图，需要多处微调

**标注**:
```
标注 1 (左上角): "添加促销标签：双十一特惠"
标注 2 (沙发中心): "增强沙发的质感和光泽"
标注 3 (背景): "背景改为温馨的客厅场景"
标注 4 (右下角): "添加产品参数：3 人座"
```

**提交后**: AI 会同时处理这 4 个修改需求，生成新版本

### 案例 2: 海报设计迭代

**场景**: 活动海报需要根据反馈调整

**标注**:
```
标注 1: "主标题字体改为更粗的黑体"
标注 2: "这里的红色太鲜艳，调整为深红色"
标注 3: "二维码位置下移 50px"
```

### 案例 3: 产品精修

**场景**: 产品图需要专业级修图

**标注**:
```
标注 1: "去除产品边缘的毛刺"
标注 2: "调整色温，偏暖色调"
标注 3: "增加高光点，位置在这个角度"
标注 4: "优化阴影过渡，更自然"
```

## 故障排除

### 问题 1: 点击图片没有反应

**原因**: 标注模式未开启

**解决**: 点击"📍 标注模式"按钮开启

### 问题 2: 标注点位置不准确

**原因**: 图片容器尺寸变化

**解决**: 刷新页面重新添加标注

### 问题 3: 提交后没有响应

**原因**: 所有标注都已处理完成

**解决**: 检查标注状态，确保有"待处理"的标注

### 问题 4: 对话框拖动后位置错乱

**原因**: 浏览器窗口尺寸改变

**解决**: 关闭并重新打开对话框

## 进阶技巧

### 1. 坐标定位

如果你知道精确的坐标位置：

```javascript
// 在控制台中直接添加标注
annotator.addAnnotation(50, 30, '修改需求');
// 参数: X%, Y%, 文字
```

### 2. 批量导入标注

```javascript
// 准备标注数据
const annotations = [
  { x: 20, y: 30, text: '修改 1' },
  { x: 50, y: 50, text: '修改 2' },
  { x: 80, y: 70, text: '修改 3' }
];

// 导入
annotator.loadAnnotations(annotations);
```

### 3. 程序化控制

```javascript
// 获取所有标注
const all = annotator.getAnnotations();

// 更新特定标注
annotator.updateAnnotation(1, '新的修改需求');

// 更新标注状态
annotator.updateAnnotationStatus(1, 'done');
```

## 小贴士

1. **标注前先预览**: 在标注前仔细查看生成的图片，规划好需要修改的位置
2. **分类标注**: 颜色相关的标注放一起，文字相关的放一起，便于 AI 理解
3. **及时保存**: 重要的会话建议在历史面板查看是否正确保存
4. **利用历史**: 相似的修改需求可以 Reopen 历史会话直接复用标注

## 下一步

- 探索更多 AI 对话功能
- 尝试批量模式的标注应用
- 查看完整的 API 文档

## 反馈与建议

如有问题或建议，欢迎反馈！
