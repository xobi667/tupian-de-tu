# Xobi 前端迁移任务计划
**目标**: 使用 Ant Design X 重构前端，保留所有现有功能

---

## 📋 现有功能完整清单

### 1. **index.html - 首页**
- [ ] 模式选择卡片（单图创作 / 批量工厂）
- [ ] 设置按钮跳转
- [ ] 响应式布局
- [ ] 渐变背景和动画效果

### 2. **single.html - 单图创作页面**

#### 2.1 图片上传区域
- [ ] 参考图上传（拖拽 + 点击）
- [ ] 产品图上传（拖拽 + 点击）
- [ ] 生成结果展示区
- [ ] Ctrl+点击标签引用到聊天功能
- [ ] 图片预览和删除

#### 2.2 控制面板
- [ ] 产品名称输入框
- [ ] 自定义 Prompt 输入框
- [ ] 画质选择器（1K/2K/4K 切换按钮组）
- [ ] 比例选择器（auto/1:1/3:4/4:3/9:16/16:9 切换按钮组）
- [ ] 立即生成按钮（流光效果）
- [ ] 加入队列按钮
- [ ] 下载按钮（生成后显示）

#### 2.3 AI Copilot 聊天
- [ ] 聊天消息列表（用户 + AI 气泡）
- [ ] @标签引用系统（@参考图 @产品图 @结果）
- [ ] 聊天输入框
- [ ] 发送按钮
- [ ] 输入工具栏（示例/AI帮写/预览/附件）
- [ ] 输入引导提示
- [ ] 聊天历史记录按钮
- [ ] AI 思考中动画

#### 2.4 标注模式（ChatCanvas）✅ **后端已完成，必须迁移**
- [ ] 标注模式切换按钮
- [ ] 点击图片添加标注点（交互式标注）
- [ ] 标注列表面板
- [ ] 标注文字输入和编辑
- [ ] 提交标注到 AI 对话
- [ ] 清空所有标注
- [ ] 标注点可视化（红点 + 序号）

#### 2.5 任务队列（Queue 系统）✅ **后端已完成，必须完整迁移**
- [ ] 任务队列浮动按钮（带徽章显示数量）
- [ ] 任务队列抽屉面板（Drawer）
- [ ] 任务列表展示（Table 或 List）
- [ ] 运行全部按钮（开始批量执行）
- [ ] 暂停/停止按钮 ✅ **后端已支持**
- [ ] 清空队列按钮
- [ ] 导出/导入队列功能
- [ ] 任务状态实时更新 ✅ **后端已支持**
- [ ] 任务进度条 ✅ **后端已支持**
- [ ] 单个任务操作（编辑/删除/移动顺序）

#### 2.6 历史记录
- [ ] 历史记录面板
- [ ] 历史记录列表
- [ ] 历史记录导出/导入
- [ ] 清空历史记录
- [ ] 恢复历史记录

#### 2.7 日志终端
- [ ] 日志消息展示
- [ ] 不同级别日志样式（info/success/error/warning）

### 3. **batch.html - 批量工厂页面**

#### 3.1 Excel 上传
- [ ] Excel 文件上传
- [ ] 文件拖拽上传
- [ ] 上传进度显示
- [ ] 文件预览

#### 3.2 批量任务控制
- [ ] 创建批量任务按钮
- [ ] 开始处理按钮
- [ ] 暂停/恢复按钮
- [ ] 停止任务按钮
- [ ] 任务进度显示
- [ ] 成功/失败统计

#### 3.3 AI Copilot
- [ ] 批量模式的 AI 对话
- [ ] 任务参数设置对话
- [ ] 批量任务建议

#### 3.4 结果展示
- [ ] 批量结果列表
- [ ] 结果图片预览
- [ ] 下载单张图片
- [ ] 批量下载 ZIP
- [ ] 导出结果列表

### 4. **editor.html - 图片编辑器**

#### 4.1 基础编辑工具
- [ ] 裁剪工具
- [ ] 缩放工具
- [ ] 旋转工具
- [ ] 添加文字工具

#### 4.2 参数调整
- [ ] 亮度滑块
- [ ] 对比度滑块
- [ ] 饱和度滑块
- [ ] 锐度滑块
- [ ] 应用调整按钮

#### 4.3 滤镜
- [ ] 锐化滤镜
- [ ] 模糊滤镜
- [ ] 平滑滤镜
- [ ] 边缘增强滤镜

#### 4.4 平台优化
- [ ] 平台选择按钮组（Amazon/Shopee/TikTok/Instagram）
- [ ] 一键优化为平台规格

#### 4.5 编辑历史
- [ ] 编辑历史列表
- [ ] 撤销操作
- [ ] 重置图片

#### 4.6 保存和导出
- [ ] 保存按钮
- [ ] 下载按钮
- [ ] 图片信息展示

### 5. **settings.html - 设置页面** ✅ **必须迁移**
- [x] API 配置表单 ✅ 已有
- [x] 云雾 API Base URL 输入 ✅ 已有
- [x] Flash Model API Key 输入 ✅ 已有
- [x] Image Model API Key 输入 ✅ 已有
- [x] Model 名称配置 ✅ 已有
- [x] 保存配置按钮 ✅ 已有
- [x] 测试连接按钮 ✅ 已有
- [x] 返回首页按钮 ✅ 已有
- [x] 配置成功/失败提示 ✅ 已有

### 6. **实时预览功能** ✅ **后端已完成，必须迁移**
- [ ] 预览按钮（工具栏中）
- [ ] 预览弹窗（Modal）
- [ ] 预览图片展示（base64 或 URL）
- [ ] 预览参数实时调整（滑块联动）
- [ ] 关闭预览不保存更改

---

## 🚀 迁移策略

### 使用 Ant Design X 组件映射

| 原有功能 | Ant Design X 组件 | 说明 |
|---------|------------------|------|
| 聊天气泡 | `Bubble` | AI 对话气泡 |
| 聊天输入 | `Sender` | 发送消息组件 |
| 提示词按钮 | `Prompts` | 快速输入建议 |
| 附件上传 | `Attachments` | 图片附件展示 |
| 欢迎界面 | `Welcome` | 初始欢迎屏 |
| 按钮 | `Button` | 各种按钮 |
| 上传 | `Upload` | 图片上传 |
| 输入框 | `Input` | 文本输入 |
| 选择器 | `Select` | 下拉选择 |
| 滑块 | `Slider` | 参数调节 |
| 标签 | `Tag` | 标签展示 |
| 卡片 | `Card` | 内容卡片 |
| 抽屉 | `Drawer` | 侧边面板 |
| 进度条 | `Progress` | 进度展示 |
| 消息提示 | `message` | 提示信息 |
| 表格 | `Table` | 任务列表 |

---

## 📦 并发迁移任务分配

### Agent 1: 单图页面核心功能
**文件**: `frontend/single-antdx.html`
**负责功能**:
- 图片上传区域（参考图/产品图/结果）
- 控制面板（产品名称/Prompt/画质/比例/按钮）
- AI Copilot 聊天界面（Bubble + Sender）
- @标签引用系统
- 日志终端

**核心组件**:
- `Upload`, `Bubble`, `Sender`, `Prompts`, `Button`, `Input`, `Tag`

### Agent 2: 批量页面功能
**文件**: `frontend/batch-antdx.html`
**负责功能**:
- Excel 上传区域
- 批量任务控制面板
- 任务进度展示
- AI Copilot 批量对话
- 结果列表和下载

**核心组件**:
- `Upload`, `Table`, `Progress`, `Button`, `Bubble`, `Drawer`

### Agent 3: 编辑器页面
**文件**: `frontend/editor-antdx.html`
**负责功能**:
- 编辑工具面板
- 参数调整滑块
- 滤镜按钮组
- 平台优化选择
- 编辑历史
- 画布展示

**核心组件**:
- `Slider`, `Button`, `Select`, `Card`, `Tag`

### Agent 4: 首页和设置页
**文件**: `frontend/index-antdx.html`, `frontend/settings-antdx.html`
**负责功能**:
- 首页模式选择卡片
- 设置页面 API 配置表单
- 导航和布局

**核心组件**:
- `Card`, `Button`, `Form`, `Input`, `message`

---

## 🎯 任务队列和历史记录（跨页面功能）

### Agent 5: 任务队列系统
**文件**: `frontend/assets/js/task-queue-antdx.js`
**负责功能**:
- 任务队列浮动按钮
- 任务队列抽屉
- 任务列表展示
- 任务控制逻辑

**核心组件**:
- `Drawer`, `Table`, `Progress`, `Badge`, `Button`

### Agent 6: 历史记录系统
**文件**: `frontend/assets/js/history-antdx.js`
**负责功能**:
- 历史记录面板
- 历史记录列表
- 导出/导入功能

**核心组件**:
- `Drawer`, `List`, `Button`

---

## ✅ 验收标准

每个 Agent 完成后需确保:

1. **功能完整性**: 原有功能 100% 迁移
2. **交互一致性**: 用户操作习惯保持一致
3. **视觉升级**: 使用 Ant Design X 提升视觉效果
4. **代码复用**: 复用现有 JS 逻辑（api.js, config-manager.js 等）
5. **响应式布局**: 适配不同屏幕尺寸
6. **性能优化**: 页面加载和交互流畅

---

## 🔗 共享资源

所有页面共享:
- `assets/js/api.js` - API 调用封装
- `assets/js/config-manager.js` - 配置管理
- `assets/js/main.js` - 通用工具函数
- `assets/js/chat.js` - 聊天逻辑
- `assets/js/tagging.js` - 标签引用系统

---

## 📅 执行顺序

1. **并发执行** Agent 1-4（各自独立，互不依赖）
2. **等待完成**后执行 Agent 5-6（跨页面功能）
3. **最后整合测试**

---

## 🚨 注意事项

1. **不要遗漏功能**: 每个 Agent 必须对照功能清单逐项实现
2. **保持 API 兼容**: 后端 API 不变，只改前端
3. **保留快捷键**: Ctrl+点击、Ctrl+Shift+A 等快捷键保留
4. **错误处理**: 保留原有的错误提示和加载状态
5. **本地存储**: 历史记录、配置等本地存储逻辑保留

---

**准备并发启动 6 个 Agent！**
